.createWorkflowPage {
  display: flex;
  flex-direction: column;
  min-height: calc(100vh - 60px); /* Account for navbar height */
  background-color: var(--bg-content-color);
  animation: fadeInUp 0.5s ease-in-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.editorContainer {
  display: flex;
  flex: 1;
  position: relative;
}

.sidebar {
  background-color: var(--bg1-color);
  border-right: var(--border-bottom);
  overflow-y: auto;
  box-shadow: var(--box-shadow-as);
  z-index: 10;
}

.sidebarContent {
  padding: 20px;
}

.sidebarContent h3 {
  margin: 0 0 20px 0;
  color: var(--heading-color);
  font-size: 1rem;
  font-weight: 600;
}

.sidebarContent h4 {
  margin: 15px 0 10px 0;
  color: var(--text-color);
  font-size: 0.875rem;
  font-weight: 600;
}

.sidebarContent h5 {
  margin: 0 0 10px 0;
  color: var(--muted-text-color);
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
}

.formGroup {
  margin-bottom: 16px;
  display: flex;
  flex-direction: column;
}

.formGroup label {
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--muted-text-color);
  margin-bottom: 6px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.formGroup input,
.formGroup textarea,
.formGroup select {
  padding: 8px 12px;
  border: var(--border-bottom);
  border-radius: 6px;
  font-size: 0.8125rem;
  font-family: inherit;
  background-color: var(--bg-content-color);
  color: var(--text-color);
  transition: border-color 0.2s ease;
}

.formGroup input:focus,
.formGroup textarea:focus,
.formGroup select:focus {
  outline: none;
  border-color: var(--primary-color);
  background-color: var(--bg1-color);
  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.1);
}

.checkbox {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  user-select: none;
  margin-bottom: 0;
}

.checkbox input[type="checkbox"] {
  width: 16px;
  height: 16px;
  cursor: pointer;
  margin: 0;
  padding: 0;
}

.divider {
  border: none;
  border-top: var(--border-bottom);
  margin: 20px 0;
}

.addBtn,
.deleteBtn,
.saveBtn,
.cancelBtn {
  padding: 10px 16px;
  border-radius: 6px;
  border: none;
  font-size: 0.8125rem;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.addBtn {
  width: 100%;
  background-color: var(--primary-color);
  color: white;
  margin-top: 10px;
}

.addBtn:hover {
  background-color: var(--primary-color-hover);
  transform: translateY(-1px);
}

.deleteBtn {
  width: 100%;
  background-color: var(--error-color);
  color: white;
  margin-top: 10px;
}

.deleteBtn:hover {
  background-color: #8b0f16;
  transform: translateY(-1px);
}

.nodeEditor {
  background-color: var(--bg-content-color);
  border: 1px solid var(--primary-color);
  border-radius: 8px;
  padding: 12px;
  margin-top: 16px;
}

.nodeEditor h5 {
  color: var(--primary-color);
  text-transform: none;
  font-size: 0.8125rem;
  margin: 0 0 12px 0;
}

.resizeHandle {
  width: 4px;
  background-color: var(--border-color);
  cursor: col-resize;
  transition: background-color 0.2s ease;
  z-index: 20;
  user-select: none;
}

.resizeHandle:hover {
  background-color: var(--secondary-color);
}

.content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.toolbar {
  background-color: var(--bg1-color);
  border-bottom: var(--border-bottom);
  padding: 16px 24px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
  box-shadow: var(--shadow);
}

.toolbarLeft {
  display: flex;
  align-items: center;
  gap: 16px;
}

.toolbarLeft h2 {
  margin: 0;
  color: var(--heading-color);
  font-size: 1.125rem;
  font-weight: 600;
}

.hint {
  color: var(--muted-text-color);
  font-size: 0.8125rem;
  background-color: var(--bg-content-color);
  padding: 4px 12px;
  border-radius: 4px;
}

.toolbarRight {
  display: flex;
  gap: 12px;
}

.saveBtn {
  background-color: var(--success-color);
  color: white;
}

.saveBtn:hover:not(:disabled) {
  background-color: #37d767;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(73, 197, 100, 0.3);
}

.saveBtn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.cancelBtn {
  background-color: var(--bg-content-color);
  color: var(--text-color);
  border: 1px solid var(--border-color);
}

.cancelBtn:hover {
  background-color: var(--border-color);
  transform: translateY(-1px);
}

.editorContent {
  flex: 1;
  overflow: hidden;
  background-color: var(--bg-content-color);
  position: relative;
}

/* ReactFlow styles */
.editorContent :global(.react-flow) {
  background-color: var(--bg-content-color);
}

.editorContent :global(.react-flow__background) {
  background-color: var(--bg-content-color);
}

.editorContent :global(.react-flow__pane) {
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40"><rect fill="%23f9f9f9" width="40" height="40"/><path d="M0 0h40v40H0z" fill="none" stroke="%23e0e0e0" stroke-width="0.5"/></svg>');
}

/* Responsive layout */
@media (max-width: 1024px) {
  .sidebar {
    width: 250px !important;
  }
  .simpleLayout {
    grid-template-columns: 200px 1fr 220px;
  }
}

@media (max-width: 768px) {
  .editorContainer {
    flex-direction: column;
  }

  .sidebar {
    width: 100% !important;
    height: auto;
    max-height: 300px;
    border-right: none;
    border-bottom: var(--border-bottom);
  }

  .resizeHandle {
    display: none;
  }

  .content {
    height: 500px; /* Fixed height for diagram on mobile */
  }

  /* Top Toolbar Responsive */
  .topToolbar {
    flex-direction: column;
    align-items: stretch;
    gap: 16px;
    padding: 16px;
  }

  .topToolbar .toolbarLeft {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }
  
  .modeToggle {
    width: 100%;
    display: grid;
    grid-template-columns: 1fr 1fr;
  }
  
  .modeBtn {
    justify-content: center;
  }

  .toolbarRight {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }
  
  .saveBtn {
    grid-column: span 2;
  }

  /* Simple Mode Responsive */
  .simpleLayout {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto;
    overflow-y: auto;
  }
  
  .leftSidebar {
    border-right: none;
    border-bottom: var(--border-bottom);
    flex-direction: column;
    overflow-x: visible;
    overflow-y: visible;
    max-height: none;
    height: auto;
  }
  
  .sidebarSection {
    flex-shrink: 0;
    min-width: 0;
    width: 100%;
    border-bottom: var(--border-bottom);
    border-right: none;
  }
  
  .rightSidebar {
    border-left: none;
    border-top: var(--border-bottom);
    max-height: none;
    height: auto;
  }
  
  .stepsGrid {
    grid-template-columns: 1fr;
    max-height: 300px;
  }
  
  .centerPanel {
    overflow: visible;
    height: auto;
  }
}

/* ============================================
   TOP TOOLBAR WITH MODE TOGGLE
   ============================================ */
.topToolbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 24px;
  background-color: var(--bg1-color);
  border-bottom: var(--border-bottom);
  box-shadow: var(--shadow);
  z-index: 20;
}

.topToolbar .toolbarLeft {
  display: flex;
  align-items: center;
  gap: 20px;
}

.backBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-content-color);
  color: var(--text-color);
  cursor: pointer;
  transition: all 0.2s ease;
}

.backBtn:hover {
  background: var(--bg1-color);
  border-color: var(--primary-color);
  color: var(--primary-color);
  transform: translateX(-2px);
}

.topToolbar .toolbarLeft h2 {
  margin: 0;
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--heading-color);
}

.modeToggle {
  display: flex;
  background: var(--bg-content-color);
  border-radius: 8px;
  padding: 4px;
  gap: 4px;
  border: 1px solid var(--border-color);
}

.modeBtn {
  padding: 6px 12px;
  border: none;
  border-radius: 6px;
  background: transparent;
  color: var(--muted-text-color);
  cursor: pointer;
  font-size: 0.8125rem;
  font-weight: 500;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 6px;
}

.modeBtn:hover {
  background: var(--bg1-color);
  color: var(--text-color);
}

.modeBtnActive {
  background: var(--bg1-color);
  color: var(--primary-color);
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  font-weight: 600;
}

.modeBtnActive:hover {
  background: var(--bg1-color);
  color: var(--primary-color);
}

.diagramBtn {
  padding: 8px 16px;
  border: 1px solid var(--primary-color);
  border-radius: 6px;
  background: var(--bg1-color);
  color: var(--primary-color);
  cursor: pointer;
  font-size: 0.8125rem;
  font-weight: 600;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 6px;
}

.diagramBtn:hover:not(:disabled) {
  background: var(--primary-color);
  color: white;
}

.diagramBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  border-color: var(--border-color);
  color: var(--muted-text-color);
  background: var(--bg-content-color);
}

.layoutBtn {
  padding: 8px 16px;
  border: 1px solid var(--success-color);
  border-radius: 6px;
  background: var(--bg1-color);
  color: var(--success-color);
  cursor: pointer;
  font-size: 0.8125rem;
  font-weight: 600;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 6px;
}

.layoutBtn:hover:not(:disabled) {
  background: var(--success-color);
  color: white;
}

.layoutBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  border-color: var(--border-color);
  color: var(--muted-text-color);
  background: var(--bg-content-color);
}

.helpBtn {
  padding: 8px 16px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg1-color);
  color: var(--text-color);
  cursor: pointer;
  font-size: 0.8125rem;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 6px;
}

.helpBtn:hover {
  background: var(--bg-content-color);
}

/* ============================================
   HELP PANEL
   ============================================ */
.helpPanel {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px;
  padding: 16px 20px;
  background: var(--bg-content-color);
  border-bottom: var(--border-bottom);
}

.helpCard {
  background: var(--bg1-color);
  padding: 14px;
  border-radius: 8px;
  border: 1px solid var(--border-color);
  border-left: 3px solid var(--primary-color);
}

.helpCard h4 {
  margin: 0 0 10px 0;
  font-size: 0.8125rem;
  font-weight: 600;
  color: var(--heading-color);
  display: flex;
  align-items: center;
  gap: 8px;
}

.helpCard ul {
  margin: 0;
  padding-left: 16px;
  font-size: 0.75rem;
  color: var(--muted-text-color);
  line-height: 1.6;
}

.helpCard li {
  margin-bottom: 4px;
}

/* ============================================
   SIMPLE MODE - SINGLE PAGE LAYOUT
   ============================================ */
.simpleMode {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: var(--bg-content-color);
}

/* Split Top Ribbon: Templates + SLA */
.topRibbon {
  background: var(--bg1-color);
  border-bottom: var(--border-bottom);
  flex-shrink: 0;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0;
}

.ribbonSection {
  display: flex;
  flex-direction: column;
  border-right: var(--border-bottom);
}

.ribbonSection:last-child {
  border-right: none;
}

.ribbonToggle {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 20px;
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: 0.8125rem;
  font-weight: 600;
  color: var(--heading-color);
  transition: background 0.15s ease;
}

.ribbonToggle:hover {
  background: var(--bg-content-color);
}

.toggleIcon {
  font-size: 0.75rem;
  color: var(--muted-text-color);
}

.templateStrip {
  display: flex;
  gap: 8px;
  padding: 8px 20px 12px;
  overflow-x: auto;
  flex-wrap: wrap;
}

.templatePill {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  border: 1px solid var(--border-color);
  border-radius: 20px;
  background: var(--bg1-color);
  cursor: pointer;
  font-size: 0.75rem;
  white-space: nowrap;
  transition: all 0.15s ease;
  color: var(--text-color);
}

.templatePill:hover {
  border-color: var(--primary-color);
  background: rgba(0, 123, 255, 0.05);
  color: var(--primary-color);
}

.templatePillActive {
  border-color: var(--primary-color);
  background: var(--primary-color);
  color: white;
}

.templatePillActive:hover {
  background: var(--primary-color);
  color: white;
}

/* SLA Ribbon Configuration */
.slaRibbonHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 20px;
  font-size: 0.8125rem;
  font-weight: 600;
  color: var(--heading-color);
  border-bottom: var(--border-bottom);
}

.slaHintInline {
  margin-left: auto;
  font-size: 0.7rem;
  font-weight: 400;
  color: var(--muted-text-color);
  font-style: italic;
}

.slaRibbonGrid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16px;
  padding: 12px 20px;
}

.slaRibbonItem {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.slaRibbonLabel {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-color);
  border-left: 3px solid;
  padding-left: 8px;
}

.slaTimeInputs {
  display: flex;
  gap: 6px;
  align-items: center;
}

.slaTimeGroup {
  display: flex;
  align-items: center;
  gap: 4px;
  flex: 1;
}

.slaTimeInput {
  width: 100%;
  padding: 6px 8px;
  border: var(--border-bottom);
  border-radius: 4px;
  font-size: 0.8rem;
  text-align: center;
  background: var(--bg-content-color);
  color: var(--text-color);
  transition: all 0.2s ease;
}

.slaTimeInput:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.1);
}

.slaTimeInput::-webkit-inner-spin-button,
.slaTimeInput::-webkit-outer-spin-button {
  opacity: 1;
}

.slaTimeUnit {
  font-size: 0.7rem;
  color: var(--muted-text-color);
  font-weight: 500;
  min-width: 14px;
}


/* 3-Column Layout */
.simpleLayout {
  flex: 1;
  display: grid;
  grid-template-columns: 240px 1fr 280px;
  gap: 0;
  min-height: 500px;
}

/* Left Sidebar */
.leftSidebar {
  background: var(--bg1-color);
  border-right: var(--border-bottom);
  display: flex;
  flex-direction: column;
  gap: 0;
}

.sidebarSection {
  padding: 16px;
  border-bottom: var(--border-bottom);
}

.sidebarTitle {
  margin: 0 0 12px 0;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--heading-color);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.compactForm {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.inputGroup {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.inputGroup label {
  font-size: 0.75rem;
  color: var(--muted-text-color);
  font-weight: 500;
}

.inputGroup input,
.inputGroup textarea,
.inputGroup select {
  padding: 6px 10px;
  border: var(--border-bottom);
  border-radius: 4px;
  font-size: 0.8125rem;
  background: var(--bg-content-color);
  color: var(--text-color);
}

.inputGroup input:focus,
.inputGroup textarea:focus {
  outline: none;
  border-color: var(--primary-color);
}

.inputRow {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* SLA Compact */
.slaCompact {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.slaHint {
  font-size: 0.7rem;
  color: var(--muted-text-color);
  margin: -4px 0 8px 0;
  line-height: 1.4;
}

.slaRow {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
}

.slaLabel {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 80px;
  border-left: 3px solid;
  padding-left: 8px;
}

.slaLabelText {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--text-color);
}

.slaExample {
  font-size: 0.65rem;
  color: var(--muted-text-color);
  font-style: italic;
}

.slaInputWrapper {
  display: flex;
  align-items: center;
  gap: 6px;
  flex: 1;
}

.slaInput {
  width: 70px;
  padding: 6px 10px;
  border: var(--border-bottom);
  border-radius: 4px;
  font-size: 0.8rem;
  text-align: center;
  background: var(--bg-content-color);
  color: var(--text-color);
  transition: all 0.2s ease;
}

.slaInput:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.1);
}

.slaInput::-webkit-inner-spin-button,
.slaInput::-webkit-outer-spin-button {
  opacity: 1;
}

.slaUnit {
  font-size: 0.75rem;
  color: var(--muted-text-color);
  font-weight: 500;
  min-width: 40px;
}

.slaLow span { color: var(--success-color); }
.slaMedium span { color: var(--medium-color); }
.slaHigh span { color: var(--high-color); }
.slaUrgent span { color: var(--critical-color); }

/* Center Panel */
.centerPanel {
  display: flex;
  flex-direction: column;
  background: var(--bg-content-color);
  overflow-y: auto;
}

.panelSection {
  display: flex;
  flex-direction: column;
  padding: 16px;
  border-bottom: var(--border-bottom);
}

.panelSection:last-child {
  border-bottom: none;
}

.panelHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
  flex-shrink: 0;
}

.panelHeader h3 {
  margin: 0;
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--heading-color);
  display: flex;
  align-items: center;
  gap: 8px;
}

.addBtnSmall {
  padding: 6px 12px;
  border: none;
  border-radius: 4px;
  background: var(--bg1-color);
  border: 1px solid var(--border-color);
  color: var(--text-color);
  font-size: 0.75rem;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 4px;
}

.addBtnSmall:hover {
  background: var(--bg-content-color);
  border-color: var(--primary-color);
  color: var(--primary-color);
}

.addBtnSmall:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Steps Grid */
.stepsGrid {
  flex: 1;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 12px;
  overflow-y: auto;
  align-content: start;
}

.stepCardCompact {
  padding: 12px;
  background: var(--bg1-color);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}

.stepStartCompact {
  border-left: 3px solid var(--success-color);
}

.stepEndCompact {
  border-left: 3px solid var(--error-color);
}

.stepCardHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.stepBadge {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-content-color);
  color: var(--muted-text-color);
  border: 1px solid var(--border-color);
  border-radius: 50%;
  font-size: 0.625rem;
  font-weight: 600;
  flex-shrink: 0;
}

.stepInput {
  flex: 1;
  padding: 4px 8px;
  border: 1px solid transparent;
  border-radius: 3px;
  font-size: 0.8125rem;
  font-weight: 600;
  background: transparent;
  color: var(--text-color);
  min-width: 0;
}

.stepInput:hover {
  border-color: var(--border-color);
}

.stepInput:focus {
  outline: none;
  border-color: var(--primary-color);
  background: var(--bg-content-color);
}

.removeBtnSmall {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  color: var(--muted-text-color);
  border: none;
  border-radius: 3px;
  cursor: pointer;
  flex-shrink: 0;
}

.removeBtnSmall:hover {
  background: rgba(220, 53, 69, 0.1);
  color: var(--error-color);
}

.stepCardBody {
  display: flex;
  align-items: center;
  gap: 8px;
}

.roleSelectCompact {
  flex: 1;
  padding: 4px 8px;
  border: var(--border-bottom);
  border-radius: 4px;
  font-size: 0.75rem;
  background: var(--bg-content-color);
  color: var(--text-color);
  min-width: 0;
}

.flagsCompact {
  display: flex;
  gap: 4px;
}

.flagsCompact label {
  display: flex;
  align-items: center;
  cursor: pointer;
}

.flagsCompact input {
  display: none;
}

.flagsCompact input:checked + .flagIconStart {
  background: var(--success-color);
  color: white;
  border-color: var(--success-color);
}

.flagsCompact input:checked + .flagIconEnd {
  background: var(--error-color);
  color: white;
  border-color: var(--error-color);
}

.flagIconStart,
.flagIconEnd {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  background: var(--bg-content-color);
  border: 1px solid var(--border-color);
  color: var(--muted-text-color);
  transition: all 0.2s;
}

/* Expand Button for Step Cards */
.expandBtnSmall {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  color: var(--muted-text-color);
  border: none;
  border-radius: 3px;
  cursor: pointer;
  flex-shrink: 0;
  transition: all 0.2s;
}

.expandBtnSmall:hover {
  background: var(--bg-content-color);
  color: var(--primary-color);
}

/* Expanded Step Card */
.stepCardExpanded {
  background: var(--bg-content-color);
}

.stepCardExpansion {
  margin-top: 8px;
  padding-top: 8px;
}

.expansionDivider {
  height: 1px;
  background: var(--border-color);
  margin-bottom: 10px;
}

.expansionRow {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.expansionRowFull {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-bottom: 8px;
}

.expansionLabel {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 0.6875rem;
  font-weight: 500;
  color: var(--muted-text-color);
  min-width: 80px;
  flex-shrink: 0;
}

.expansionSelect {
  flex: 1;
  padding: 4px 8px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  font-size: 0.6875rem;
  background: var(--bg1-color);
  color: var(--text-color);
  min-width: 0;
}

.expansionSelect:focus {
  outline: none;
  border-color: var(--primary-color);
}

.expansionInput {
  width: 60px;
  padding: 4px 8px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  font-size: 0.6875rem;
  background: var(--bg1-color);
  color: var(--text-color);
  text-align: center;
}

.expansionInput:focus {
  outline: none;
  border-color: var(--primary-color);
}

.weightInputWrapper {
  display: flex;
  align-items: center;
  gap: 6px;
  flex: 1;
}

.weightHint {
  font-size: 0.625rem;
  color: var(--muted-text-color);
}

.expansionInputFull {
  width: 100%;
  padding: 6px 8px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  font-size: 0.75rem;
  background: var(--bg1-color);
  color: var(--text-color);
}

.expansionInputFull:focus {
  outline: none;
  border-color: var(--primary-color);
}

.expansionTextarea {
  width: 100%;
  padding: 6px 8px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  font-size: 0.75rem;
  background: var(--bg1-color);
  color: var(--text-color);
  resize: vertical;
  min-height: 40px;
  font-family: inherit;
}

.expansionTextarea:focus {
  outline: none;
  border-color: var(--primary-color);
}

/* Transitions Compact */
.transitionsCompact {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow-y: auto;
}

.transitionRow {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--bg1-color);
  border: 1px solid var(--border-color);
  border-radius: 6px;
}

.transitionSelectSmall {
  flex: 1;
  min-width: 80px;
  padding: 4px 8px;
  border: var(--border-bottom);
  border-radius: 4px;
  font-size: 0.75rem;
  background: var(--bg-content-color);
  color: var(--text-color);
}

.arrowSmall {
  color: var(--muted-text-color);
  flex-shrink: 0;
  display: flex;
  align-items: center;
}

.transitionInputSmall {
  flex: 1;
  min-width: 60px;
  padding: 4px 8px;
  border: var(--border-bottom);
  border-radius: 4px;
  font-size: 0.75rem;
  background: var(--bg-content-color);
  color: var(--text-color);
}

.emptySmall {
  text-align: center;
  padding: 32px;
  color: var(--muted-text-color);
  font-size: 0.8125rem;
  font-style: italic;
  background: var(--bg1-color);
  border-radius: 8px;
  border: 1px dashed var(--border-color);
}

/* Right Sidebar */
.rightSidebar {
  background: var(--bg1-color);
  border-left: var(--border-bottom);
  display: flex;
  flex-direction: column;
  gap: 0;
}

/* Validation Box */
.validationBox {
  padding: 12px 16px;
  border-bottom: var(--border-bottom);
}

.validationOk {
  background: rgba(40, 167, 69, 0.08);
  border-left: 3px solid var(--success-color);
}

.validationOk .validationHeader {
  color: var(--success-color);
}

.validationError {
  background: rgba(220, 53, 69, 0.08);
  border-left: 3px solid var(--error-color);
}

.validationError .validationHeader {
  color: var(--error-color);
}

.validationHeader {
  font-size: 0.8125rem;
  font-weight: 600;
  margin-bottom: 4px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.validationList {
  margin: 0;
  padding-left: 0;
  list-style: none;
  font-size: 0.75rem;
  color: var(--text-color);
  line-height: 1.5;
}

.validationList li {
  margin-top: 4px;
  display: flex;
  align-items: flex-start;
  gap: 6px;
}

.validationList li::before {
  content: "â€¢";
  color: var(--error-color);
}

/* Preview Box */
.previewBox {
  flex: 1;
  padding: 16px;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.previewTitle {
  margin: 0 0 12px 0;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--heading-color);
  flex-shrink: 0;
  display: flex;
  align-items: center;
  gap: 6px;
}

.previewContent {
  flex: 1;
  overflow-y: auto;
  background: var(--bg-content-color);
  border-radius: 8px;
  padding: 12px;
  border: 1px solid var(--border-color);
}

.flowMini {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.flowMiniNode {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.flowMiniBox {
  display: flex;
  flex-direction: column;
  padding: 8px 12px;
  background: var(--bg1-color);
  border: 1px solid var(--border-color);
  border-radius: 6px;
}

.flowMiniBox strong {
  font-size: 0.75rem;
  color: var(--heading-color);
}

.flowMiniBox small {
  font-size: 0.625rem;
  color: var(--muted-text-color);
}

.flowMiniStart {
  border-left: 3px solid var(--success-color);
}

.flowMiniEnd {
  border-left: 3px solid var(--error-color);
}

.flowMiniArrow {
  font-size: 0.75rem;
  color: var(--muted-text-color);
  padding-left: 16px;
  display: flex;
  align-items: center;
  gap: 4px;
}

.flowMiniArrow em {
  color: var(--primary-color);
  font-style: normal;
  font-weight: 500;
  background: var(--bg1-color);
  padding: 2px 6px;
  border-radius: 4px;
  border: 1px solid var(--border-color);
  font-size: 0.625rem;
}

/* Help Tips Box in Right Sidebar */
.helpTipsBox {
  padding: 16px;
  border-top: var(--border-bottom);
  background: var(--bg-content-color);
  flex-shrink: 0;
}

.helpTipsContent {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.tipItem {
  font-size: 0.75rem;
  color: var(--text-color);
  padding: 8px 12px;
  background: var(--bg1-color);
  border-radius: 6px;
  line-height: 1.5;
  border-left: 2px solid var(--primary-color);
  box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}

.tipItem strong {
  color: var(--heading-color);
  font-weight: 600;
}

/* Required field marker */
.required {
  color: var(--error-color);
}

/* ============================================
   CONNECTION ERROR TOAST
   ============================================ */
.connectionErrorToast {
  position: absolute;
  top: 16px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 20px;
  background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
  border: 1px solid #f87171;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(239, 68, 68, 0.25);
  color: #dc2626;
  font-size: 0.875rem;
  font-weight: 500;
  animation: slideInDown 0.3s ease-out, fadeOut 0.3s ease-in 2.7s forwards;
}

.connectionErrorToast svg {
  flex-shrink: 0;
}

@keyframes slideInDown {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
    visibility: hidden;
  }
}

/* ============================================
   CONNECTION VALIDATION INDICATOR
   ============================================ */
.connectionValidIndicator {
  position: absolute;
  bottom: 16px;
  right: 16px;
  z-index: 100;
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  background: var(--bg1-color);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 0.75rem;
  color: var(--muted-text-color);
}

.connectionValidIndicator.valid {
  border-color: #22c55e;
  color: #16a34a;
}

.connectionValidIndicator.invalid {
  border-color: #ef4444;
  color: #dc2626;
}

/* Handle legend for editor */
.handleLegend {
  position: absolute;
  bottom: 16px;
  left: 16px;
  z-index: 100;
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 12px;
  background: var(--bg1-color);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  font-size: 0.7rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.handleLegend .legendTitle {
  font-weight: 600;
  color: var(--heading-color);
  margin-bottom: 4px;
  font-size: 0.75rem;
}

.handleLegendItem {
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--muted-text-color);
}

.handleLegendDot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  border: 2px solid #fff;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
}

.handleLegendDot.input {
  background-color: #22c55e;
}

.handleLegendDot.output {
  background-color: #3b82f6;
}

/* Flow Animation Toggle Button */
.flowAnimationToggle {
  position: absolute;
  bottom: 16px;
  right: 16px;
  z-index: 100;
}

.animationBtn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  background: var(--bg1-color);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--text-color);
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.animationBtn:hover {
  background: var(--bg-content-color);
  border-color: #3b82f6;
  color: #3b82f6;
}

.animationBtn.animationActive {
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  border-color: #2563eb;
  color: white;
  box-shadow: 0 2px 12px rgba(59, 130, 246, 0.4);
}

.animationBtn.animationActive:hover {
  background: linear-gradient(135deg, #2563eb, #1d4ed8);
}

/* ============================================
   REFACTORED COMPONENT STYLES
   ============================================ */

/* Sidebar Tabs */
.sidebarTabs {
  display: flex;
  border-bottom: 1px solid var(--border-color);
  margin-bottom: 16px;
}

.sidebarTab {
  flex: 1;
  padding: 10px;
  border: none;
  background: transparent;
  cursor: pointer;
  font-weight: 400;
  color: var(--muted-text-color);
  border-bottom: 2px solid transparent;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  font-size: 0.8125rem;
}

.sidebarTab:hover {
  color: var(--primary-color);
}

.sidebarTabActive {
  font-weight: 600;
  color: var(--primary-color);
  border-bottom-color: var(--primary-color);
}

/* View Mode Toggle */
.viewModeToggle {
  display: flex;
  border-bottom: 1px solid var(--border-color);
  margin-bottom: 16px;
  background: var(--bg-content-color);
  border-radius: 8px 8px 0 0;
  padding: 4px;
}

.viewModeBtn {
  flex: 1;
  padding: 10px 16px;
  border: none;
  border-radius: 6px;
  background: transparent;
  cursor: pointer;
  font-weight: 400;
  color: var(--muted-text-color);
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-size: 0.8125rem;
}

.viewModeBtn:hover {
  color: var(--text-color);
}

.viewModeBtnActive {
  background: var(--bg1-color);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  font-weight: 600;
  color: var(--text-color);
}

/* Template Grid */
.templateGrid {
  display: grid;
  gap: 12px;
}

.templateCard {
  padding: 12px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  background: var(--bg1-color);
  cursor: pointer;
  text-align: left;
  transition: all 0.2s;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.templateCard:hover {
  border-color: var(--secondary-color);
  background: var(--bg-content-color);
}

.templateCardSelected {
  border-color: var(--primary-color);
  border-width: 2px;
  background: rgba(37, 99, 235, 0.05);
}

.templateCardHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  color: var(--heading-color);
}

.templateCardDesc {
  font-size: 0.75rem;
  color: var(--muted-text-color);
  line-height: 1.4;
}

/* Flow Container */
.flowContainer {
  flex: 1;
  min-height: 400px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  overflow: hidden;
}

.flowEmptyState {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--muted-text-color);
  flex-direction: column;
  gap: 12px;
}

/* ============================================
   SLA WEIGHT EDITOR MODAL
   ============================================ */
.slaModal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 50;
}

.slaModalContent {
  background-color: #ffffff;
  border-radius: 8px;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  max-width: 672px;
  width: 100%;
  margin: 0 16px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
}

.slaModalHeader {
  padding: 24px;
  border-bottom: 1px solid #e5e7eb;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.slaModalHeaderInfo h2 {
  font-size: 18px;
  font-weight: 600;
  color: #111827;
  margin: 0;
}

.slaModalHeaderInfo p {
  font-size: 14px;
  color: #4b5563;
  margin: 4px 0 0 0;
}

.slaModalCloseBtn {
  padding: 8px;
  background: none;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.slaModalCloseBtn:hover {
  background-color: #f3f4f6;
}

.slaModalCloseBtn svg {
  width: 20px;
  height: 20px;
  color: #4b5563;
}

.slaModalBody {
  padding: 24px;
  flex: 1;
  overflow-y: auto;
}

.slaInfoBox {
  background-color: #eff6ff;
  border: 1px solid #bfdbfe;
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 24px;
  display: flex;
  gap: 12px;
}

.slaInfoIcon {
  width: 20px;
  height: 20px;
  color: #2563eb;
  flex-shrink: 0;
  margin-top: 2px;
}

.slaInfoText {
  font-size: 14px;
  color: #1e40af;
}

.slaInfoText p {
  margin: 0;
}

.slaInfoText p + p {
  margin-top: 4px;
}

.slaSummary {
  margin-bottom: 24px;
}

.slaSummaryTitle {
  font-size: 14px;
  font-weight: 500;
  color: #111827;
  margin: 0 0 12px 0;
}

.slaSummaryGrid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}

.slaSummaryCard {
  background-color: #f9fafb;
  border-radius: 8px;
  padding: 12px;
  text-align: center;
}

.slaSummaryLabel {
  font-size: 12px;
  color: #4b5563;
}

.slaSummaryValue {
  font-size: 14px;
  font-weight: 500;
  color: #111827;
}

.slaStepsList {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.slaStepCard {
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  padding: 16px;
}

.slaStepHeader {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 12px;
}

.slaStepName {
  font-weight: 500;
  color: #111827;
}

.slaStepMeta {
  font-size: 14px;
  color: #4b5563;
}

.slaStepWeight {
  text-align: right;
}

.slaStepWeightValue {
  font-weight: 500;
  color: #111827;
}

.slaStepWeightPercent {
  font-size: 14px;
  color: #4b5563;
}

.slaStepControls {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.slaStepSlider {
  flex: 1;
}

.slaStepInput {
  width: 64px;
  padding: 4px 8px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  text-align: center;
  font-size: 14px;
  color: #111827;
}

.slaStepBreakdown {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
  font-size: 12px;
}

.slaStepBreakdownItem {
  text-align: center;
}

.slaStepBreakdownLabel {
  color: #6b7280;
}

.slaStepBreakdownValue {
  color: #111827;
}

.slaModalFooter {
  padding: 24px;
  border-top: 1px solid #e5e7eb;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.slaModalFooterInfo {
  font-size: 14px;
  color: #4b5563;
}

.slaModalFooterSuccess {
  margin-left: 8px;
  color: #16a34a;
}

.slaModalFooterError {
  margin-left: 8px;
  color: #dc2626;
}

.slaModalFooterActions {
  display: flex;
  gap: 8px;
}

/* Buttons for SLA Modal */
.btnPrimary {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  background-color: var(--primary-color);
  color: #ffffff;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition);
}

.btnPrimary:hover:not(:disabled) {
  background-color: var(--primary-color-hover);
}

.btnPrimary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btnSecondary {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  background-color: var(--bg1-color);
  color: var(--text-color);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition);
}

.btnSecondary:hover:not(:disabled) {
  background-color: var(--bg-content-color);
}

.btnSecondary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Loading Spinner */
.loadingContent {
  text-align: center;
}

.loadingSpinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--border-color);
  border-top-color: var(--primary-color);
  border-radius: 50%;
  animation: spinnerSpin 1s linear infinite;
  margin: 0 auto 16px;
}

@keyframes spinnerSpin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.loadingText {
  color: var(--muted-text-color);
}

/* ============================================
   FORM STYLES FOR EDIT PANELS
   ============================================ */
.formLabel {
  display: block;
  font-size: 0.8125rem;
  color: var(--text-color);
  margin-bottom: 4px;
  font-weight: 500;
}

.formInput {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 0.8125rem;
  color: var(--text-color);
  background: var(--bg-content-color);
  transition: border-color 0.2s, box-shadow 0.2s;
}

.formInput:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
}

.formInput:disabled {
  background-color: var(--bg-color);
  color: var(--muted-text-color);
}

.formInputError {
  border-color: var(--error-color) !important;
}

.formInputError:focus {
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1) !important;
}

.formInputWarning {
  border-color: var(--accent-color) !important;
}

.formInputWarning:focus {
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1) !important;
}

.formError {
  color: var(--error-color);
  font-size: 0.75rem;
  margin-top: 4px;
  margin-bottom: 0;
}

.formHelp {
  color: var(--muted-text-color);
  font-size: 0.6875rem;
  margin-top: 2px;
  margin-bottom: 0;
}

.formTextarea {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 0.8125rem;
  color: var(--text-color);
  background: var(--bg-content-color);
  resize: vertical;
  font-family: inherit;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.formTextarea:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
}

.formSelect {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 0.8125rem;
  color: var(--text-color);
  background: var(--bg-content-color);
  cursor: pointer;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.formSelect:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
}

.formDivider {
  padding-top: 16px;
  border-top: 1px solid var(--border-color);
  margin-top: 16px;
}

.formCheckboxGroup {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.formCheckboxLabel {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.formCheckbox {
  width: 16px;
  height: 16px;
  accent-color: var(--primary-color);
}

.formCheckboxText {
  font-size: 0.8125rem;
  color: var(--text-color);
}

.btnDelete {
  width: 100%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 8px 16px;
  background-color: #fef2f2;
  color: #b91c1c;
  border: none;
  border-radius: 6px;
  font-size: 0.8125rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s;
}

.btnDelete:hover {
  background-color: #fee2e2;
}

.btnDeleteIcon {
  width: 16px;
  height: 16px;
}

/* ============================================
   CONFIRM DIALOG
   ============================================ */
.dialogOverlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 50;
}

.dialogBox {
  background-color: var(--bg-color, #ffffff);
  border-radius: 8px;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  max-width: 448px;
  width: 100%;
  margin: 0 16px;
}

.dialogContent {
  padding: 24px;
}

.dialogHeader {
  display: flex;
  align-items: flex-start;
  gap: 16px;
}

.dialogIconDanger {
  padding: 8px;
  border-radius: 50%;
  background-color: #fee2e2;
}

.dialogIconWarning {
  padding: 8px;
  border-radius: 50%;
  background-color: #fef9c3;
}

.dialogIcon {
  width: 24px;
  height: 24px;
}

.dialogIconDanger .dialogIcon {
  color: #dc2626;
}

.dialogIconWarning .dialogIcon {
  color: #ca8a04;
}

.dialogBody {
  flex: 1;
}

.dialogTitle {
  color: var(--text-color, #111827);
  font-weight: 500;
  margin: 0 0 8px 0;
  font-size: 16px;
}

.dialogMessage {
  font-size: 14px;
  color: var(--muted-text-color, #4b5563);
  margin: 0;
}

.dialogFooter {
  padding: 16px 24px;
  background-color: var(--bg1-color, #f9fafb);
  border-radius: 0 0 8px 8px;
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

.btnCancel {
  padding: 8px 16px;
  background-color: var(--bg-color, #ffffff);
  border: 1px solid var(--border-color, #d1d5db);
  color: var(--text-color, #374151);
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s;
}

.btnCancel:hover {
  background-color: var(--bg1-color, #f9fafb);
}

.btnDanger {
  padding: 8px 16px;
  background-color: #dc2626;
  border: none;
  color: #ffffff;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s;
}

.btnDanger:hover {
  background-color: #b91c1c;
}

.btnWarning {
  padding: 8px 16px;
  background-color: #ca8a04;
  border: none;
  color: #ffffff;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s;
}

.btnWarning:hover {
  background-color: #a16207;
}

/* ============================================
   STEP NODE
   ============================================ */
.stepNode {
  padding: 12px 16px;
  border-radius: 8px;
  background-color: var(--bg1-color, #ffffff);
  border: 2px solid var(--border-color, #e0e0e0);
  box-shadow: var(--shadow, 0 4px 10px rgba(0, 0, 0, 0.05));
  transition: var(--transition, all 0.3s ease-in-out);
  min-width: 180px;
  cursor: pointer;
}

.stepNode:hover {
  border-color: var(--secondary-color, #545f71);
}

.stepNodeSelected {
  border-color: var(--primary-color, #007bff);
  box-shadow: var(--box-shadow-as, 0 1px 3px rgba(0, 0, 0, 0.2));
}

.stepNodeStart {
  border-left: 4px solid var(--green-color, #34c759);
}

.stepNodeEnd {
  border-left: 4px solid var(--error-color, #ae131b);
}

.stepNodeContent {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.stepNodeBody {
  flex: 1;
}

.stepNodeHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
  flex-wrap: wrap;
}

.stepNodeLabel {
  color: var(--text-color, #242424);
  font-weight: 500;
  font-size: var(--default-font-size, 0.875rem);
}

.stepNodeBadge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: var(--table-font-size, 0.75rem);
}

.stepNodeBadgeStart {
  background-color: var(--low-bg-color, #d0f0c0);
  color: var(--low-color, #2e7d32);
}

.stepNodeBadgeEnd {
  background-color: var(--critical-bg-color, #f8d7da);
  color: var(--critical-color, #a00000);
}

.stepNodeBadgeIcon {
  width: 12px;
  height: 12px;
}

.stepNodeRole {
  font-size: var(--default-font-size, 0.875rem);
  color: var(--muted-text-color, #6b7280);
}

.stepNodeDescription {
  font-size: var(--table-font-size, 0.75rem);
  color: var(--muted-text-color, #6b7280);
  margin-top: 4px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* ============================================
   6-HANDLE STEP NODE SYSTEM
   Color coding for connection type visualization:
   - Target handles (incoming): Green (#22c55e)
   - Source handles (outgoing): Blue (#3b82f6)
   ============================================ */
.stepNodeHandle {
  width: 12px;
  height: 12px;
  border: 2px solid #fff;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.stepNodeHandle:hover {
  transform: scale(1.3);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
}

/* Target handles (incoming) - Green color scheme */
.handleTarget {
  background-color: #22c55e !important;
}

.handleTarget:hover {
  background-color: #16a34a !important;
}

/* Source handles (outgoing) - Blue color scheme */
.handleSource {
  background-color: #3b82f6 !important;
}

.handleSource:hover {
  background-color: #2563eb !important;
}

/* Positional styling for staggered side handles */
.handleTop {
  /* Top handle - centered */
}

.handleBottom {
  /* Bottom handle - centered */
}

/* Left side handles - staggered vertically */
.handleLeftTop {
  /* in-L: Target at 30% - set via inline style */
}

.handleLeftBottom {
  /* out-L: Source at 70% - set via inline style */
}

/* Right side handles - staggered vertically */
.handleRightTop {
  /* out-R: Source at 30% - set via inline style */
}

.handleRightBottom {
  /* in-R: Target at 70% - set via inline style */
}

/* Visual indicator for valid connection targets during drag */
.stepNode:global(.connecting) .handleTarget {
  animation: pulse-target 1s infinite;
}

.stepNode:global(.connecting) .handleSource {
  animation: pulse-source 1s infinite;
}

@keyframes pulse-target {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4);
  }
  50% {
    box-shadow: 0 0 0 6px rgba(34, 197, 94, 0);
  }
}

@keyframes pulse-source {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
  }
  50% {
    box-shadow: 0 0 0 6px rgba(59, 130, 246, 0);
  }
}

/* ============================================
   CANVAS WRAPPER - ReactFlow container
   ============================================ */
.canvasWrapper {
  width: 100%;
  height: 100%;
  position: relative;
  background-color: var(--bg-content-color, #f9f9f9);
}

.relativeContainer {
  position: relative;
  height: 100%;
  overflow: hidden;
}

/* ============================================
   EDITOR TOOLBAR SECTION (Left Panel Tools)
   ============================================ */
.toolbarSection {
  padding: 16px;
  border-bottom: var(--border-bottom, 1px solid #e0e0e0);
}

.toolbarSection:last-child {
  border-bottom: none;
}

.toolbarTitle {
  color: var(--heading-color, #333);
  font-weight: 600;
  margin-bottom: 16px;
  font-size: var(--default-font-size, 0.875rem);
}

.toolbarAddForm {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.toolbarAddFormButtons {
  display: flex;
  gap: 8px;
}

.toolbarAddFormButtons button {
  flex: 1;
}

.toolbarQuickAdd {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}

.toolbarQuickAddIcon {
  width: 16px;
  height: 16px;
  color: var(--secondary-color, #545f71);
}

.toolbarQuickAddText {
  font-size: var(--default-font-size, 0.875rem);
  color: var(--text-color, #242424);
  font-weight: 500;
}

.toolbarQuickAddGrid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 8px;
}

.toolbarQuickAddBtn {
  padding: 10px 12px;
  background-color: var(--bg-content-color, #f9f9f9);
  border: 1px solid var(--border-color, #e0e0e0);
  border-radius: 6px;
  font-size: var(--default-font-size, 0.875rem);
  color: var(--text-color, #242424);
  cursor: pointer;
  transition: var(--transition, all 0.3s ease-in-out);
  display: flex;
  align-items: center;
  gap: 10px;
}

.toolbarQuickAddBtn:hover:not(:disabled) {
  background-color: var(--bg-color, #fcfcfc);
  border-color: var(--primary-color, #007bff);
}

.toolbarQuickAddBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.toolbarStats {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}

.toolbarStatsIcon {
  width: 16px;
  height: 16px;
  color: var(--secondary-color, #545f71);
}

.toolbarStatsTitle {
  color: var(--heading-color, #333);
  font-weight: 500;
  font-size: var(--default-font-size, 0.875rem);
}

.toolbarStatsList {
  display: flex;
  flex-direction: column;
  gap: 8px;
  font-size: var(--default-font-size, 0.875rem);
}

.toolbarStatsItem {
  display: flex;
  justify-content: space-between;
}

.toolbarStatsLabel {
  color: var(--muted-text-color, #6b7280);
}

.toolbarStatsValue {
  color: var(--text-color, #242424);
  font-weight: 600;
}

.toolbarShortcuts {
  margin-top: auto;
  padding: 16px;
  border-top: var(--border-bottom, 1px solid #e0e0e0);
  background-color: var(--bg-content-color, #f9f9f9);
}

.toolbarShortcutsHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.toolbarShortcutsIcon {
  width: 16px;
  height: 16px;
  color: var(--secondary-color, #545f71);
}

.toolbarShortcutsTitle {
  font-size: var(--default-font-size, 0.875rem);
  color: var(--text-color, #242424);
  font-weight: 500;
}

.toolbarShortcutsList {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: var(--table-font-size, 0.75rem);
  color: var(--muted-text-color, #6b7280);
}

.toolbarShortcutItem {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.toolbarShortcutKey {
  padding: 2px 8px;
  background-color: var(--bg1-color, #ffffff);
  border: 1px solid var(--border-color, #e0e0e0);
  border-radius: 4px;
  color: var(--text-color, #242424);
  font-size: 11px;
  font-family: monospace;
}

/* ============================================
   LOADING STATE
   ============================================ */
.loadingContainer {
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--bg-content-color, #f9f9f9);
}

/* ============================================
   UNSAVED CHANGES WARNING
   ============================================ */
.unsavedWarning {
  background-color: #fef9c3;
  border-bottom: 1px solid #fde68a;
  padding: 8px 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.warningContent {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  color: #854d0e;
}

.warningIcon {
  width: 16px;
  height: 16px;
}

.saveNowBtn {
  font-size: 14px;
  color: #854d0e;
  background: none;
  border: none;
  cursor: pointer;
  text-decoration: underline;
}

.saveNowBtn:hover {
  color: #713f12;
}

/* ============================================
   COLLAPSE/EXPAND BUTTONS
   ============================================ */
.collapseBtn {
  position: absolute;
  top: 60px;
  padding: 4px;
  background-color: var(--bg-color, #ffffff);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 4px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.05);
  cursor: pointer;
  transition: background-color 0.2s;
  z-index: 10;
}

.collapseBtn:hover {
  background-color: var(--bg1-color, #f9fafb);
}

.collapseBtnLeft {
  right: -12px;
}

.collapseBtnRight {
  left: -12px;
}

.collapseBtn svg {
  width: 12px;
  height: 12px;
  color: var(--muted-text-color, #4b5563);
}

.expandBtn {
  width: 32px;
  background-color: var(--bg-color, #ffffff);
  border: none;
  cursor: pointer;
  transition: background-color 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.expandBtn:hover {
  background-color: var(--bg1-color, #f9fafb);
}

.expandBtnLeft {
  border-right: 1px solid var(--border-color, #e5e7eb);
}

.expandBtnRight {
  border-left: 1px solid var(--border-color, #e5e7eb);
}

.expandBtn svg {
  width: 16px;
  height: 16px;
  color: var(--muted-text-color, #4b5563);
}